# What is NVM? (Novaria Virtual Machine)

## Introduction

NVM (Novaria Virtual Machine) is not just a component of NovariaOS, but its fundamental execution environment. It is a virtual machine built directly into the operating system. NVM is an interpreter for a custom bytecode, possessing its own memory and call stack, and serves as a universal platform for running *any* user code in NovariaOS.

## Architecture and Design

NVM is designed as a simple yet powerful virtual machine.

*   **Bytecode:** The NVM executable format uses a custom binary bytecode. The instructions are Turing-complete, allowing for the implementation of complex logic, while remaining high-level and isolated. The bytecode itself has no direct access to hardware.
*   **Execution Model:** At the current stage, NVM operates as an **interpreter**, sequentially reading and executing bytecode instructions.
*   **System Access:** Interaction with the kernel and system services occurs exclusively through **system calls (syscalls)**. These syscalls are high-level and provide a safe interface for everything from memory management and I/O to working with the CAPS security mechanisms.

## Role in NovariaOS

NVM is the heart of the NovariaOS userspace, solving several key tasks:

*   **Unified Execution Model:** Any program, regardless of the language it was originally written in, ultimately runs as NVM bytecode. This creates a consistent and predictable runtime environment.
*   **Isolation and Fault Tolerance:** Since all code executes inside a managed VM, component isolation is achieved. If one program (e.g., a driver) crashes, the failure will be contained within its NVM instance and will not affect the stability of the entire system.
*   **Abstraction and Portability:** NVM abstracts programs from the specific details of the underlying hardware. This provides a consistent interface for all software and paves the way for true application portability within the NovariaOS ecosystem.

## Security: NVM and CAPS

It is important to distinguish responsibilities:
*   **NVM** is responsible for code **isolation** and managing its execution.
*   **CAPS** is responsible for **security** and access control.
These systems are tightly integrated: every system call from the bytecode is validated by the CAPS mechanism, which decides whether the program has the right to perform the requested operation.

## Current State and Tools

The primary development tool at this stage is the NVM assembler compiler â€” **[nvmA](https://github.com/z3nnix/nvma)**. It allows programmers to write code directly in NVM assembly and compile it into executable bytecode, laying the groundwork for future high-level compilers (e.g., for C or Python).